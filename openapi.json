{"openapi":"3.1.0","info":{"title":"Precios Soley API","description":"API for managing materials and prices","version":"0.1.0"},"paths":{"/auth/register":{"post":{"tags":["auth"],"summary":"Register","operationId":"register_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/materials/":{"post":{"tags":["materials"],"summary":"Create Material Route","operationId":"create_material_route_api_materials__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaterialCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaterialResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["materials"],"summary":"Read Materials","operationId":"read_materials_api_materials__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MaterialResponse"},"title":"Response Read Materials Api Materials  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/materials/{material_id}":{"get":{"tags":["materials"],"summary":"Read Material","operationId":"read_material_api_materials__material_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"material_id","in":"path","required":true,"schema":{"type":"integer","title":"Material Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaterialResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["materials"],"summary":"Update Material Route","operationId":"update_material_route_api_materials__material_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"material_id","in":"path","required":true,"schema":{"type":"integer","title":"Material Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaterialUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaterialResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["materials"],"summary":"Delete Material Route","operationId":"delete_material_route_api_materials__material_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"material_id","in":"path","required":true,"schema":{"type":"integer","title":"Material Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/materials/{material_id}/costos":{"post":{"tags":["materials"],"summary":"Read Costs","operationId":"read_costs_api_materials__material_id__costos_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"material_id","in":"path","required":true,"schema":{"type":"integer","title":"Material Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CantidadQuery"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostosResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/":{"post":{"tags":["products"],"summary":"Create New Product","description":"Create a new product with associated materials","operationId":"create_new_product_api_products__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["products"],"summary":"Read Products","description":"Get all products for the current user","operationId":"read_products_api_products__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/costs/total":{"get":{"tags":["products"],"summary":"Get Total Costs","description":"Calculate total costs for all products","operationId":"get_total_costs_api_products_costs_total_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/products/{product_id}":{"get":{"tags":["products"],"summary":"Read Product","description":"Get a specific product by ID","operationId":"read_product_api_products__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["products"],"summary":"Update Existing Product","description":"Update an existing product","operationId":"update_existing_product_api_products__product_id__put","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["products"],"summary":"Delete Existing Product","description":"Delete a product (soft delete)","operationId":"delete_existing_product_api_products__product_id__delete","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/{product_id}/materials":{"post":{"tags":["products"],"summary":"Add Material To Existing Product","description":"Add a material to an existing product","operationId":"add_material_to_existing_product_api_products__product_id__materials_post","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductMaterialCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/{product_id}/materials/{material_id}":{"delete":{"tags":["products"],"summary":"Remove Material From Existing Product","description":"Remove a material from a product","operationId":"remove_material_from_existing_product_api_products__product_id__materials__material_id__delete","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"material_id","in":"path","required":true,"schema":{"type":"integer","title":"Material Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CantidadQuery":{"properties":{"cantidades":{"items":{"anyOf":[{"type":"number"},{"type":"string"}]},"type":"array","title":"Cantidades"}},"type":"object","required":["cantidades"],"title":"CantidadQuery"},"CostosResponse":{"properties":{"material":{"$ref":"#/components/schemas/MaterialResponse"},"costos":{"additionalProperties":{"type":"string"},"type":"object","title":"Costos"}},"type":"object","required":["material","costos"],"title":"CostosResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MaterialCreate":{"properties":{"nombre":{"type":"string","title":"Nombre"},"precio_base":{"anyOf":[{"type":"number"},{"type":"string"}],"title":"Precio Base"},"unidad_base":{"allOf":[{"$ref":"#/components/schemas/UnidadBase"}],"default":"kg"},"cantidades_deseadas":{"anyOf":[{"items":{"anyOf":[{"type":"number"},{"type":"string"}]},"type":"array"},{"type":"null"}],"title":"Cantidades Deseadas"}},"type":"object","required":["nombre","precio_base"],"title":"MaterialCreate"},"MaterialResponse":{"properties":{"id":{"type":"integer","title":"Id"},"nombre":{"type":"string","title":"Nombre"},"precio_base":{"type":"string","title":"Precio Base"},"unidad_base":{"type":"string","title":"Unidad Base"},"precio_unidad_pequena":{"type":"string","title":"Precio Unidad Pequena"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","nombre","precio_base","unidad_base","precio_unidad_pequena","is_active"],"title":"MaterialResponse"},"MaterialUpdate":{"properties":{"nombre":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nombre"},"precio_base":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Precio Base"},"unidad_base":{"anyOf":[{"$ref":"#/components/schemas/UnidadBase"},{"type":"null"}]}},"type":"object","title":"MaterialUpdate"},"ProductCreate":{"properties":{"nombre":{"type":"string","title":"Nombre"},"iva_percentage":{"type":"number","title":"Iva Percentage","default":21.0},"margen_publico":{"type":"number","title":"Margen Publico"},"margen_mayorista":{"type":"number","title":"Margen Mayorista"},"margen_distribuidor":{"type":"number","title":"Margen Distribuidor"},"costo_etiqueta":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Costo Etiqueta","default":0.0},"costo_envase":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Costo Envase","default":0.0},"costo_caja":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Costo Caja","default":0.0},"costo_transporte":{"anyOf":[{"type":"number"},{"type":"string"}],"title":"Costo Transporte"},"product_materials":{"items":{"$ref":"#/components/schemas/ProductMaterialCreate"},"type":"array","title":"Product Materials","default":[]}},"type":"object","required":["nombre","margen_publico","margen_mayorista","margen_distribuidor","costo_transporte"],"title":"ProductCreate"},"ProductMaterialCreate":{"properties":{"material_id":{"type":"integer","title":"Material Id"},"cantidad":{"anyOf":[{"type":"number"},{"type":"string"}],"title":"Cantidad"}},"type":"object","required":["material_id","cantidad"],"title":"ProductMaterialCreate"},"ProductMaterialResponse":{"properties":{"id":{"type":"integer","title":"Id"},"product_id":{"type":"integer","title":"Product Id"},"material_id":{"type":"integer","title":"Material Id"},"cantidad":{"type":"string","title":"Cantidad"},"costo":{"type":"string","title":"Costo"},"material":{"anyOf":[{"$ref":"#/components/schemas/MaterialResponse"},{"type":"null"}]}},"type":"object","required":["id","product_id","material_id","cantidad","costo"],"title":"ProductMaterialResponse"},"ProductResponse":{"properties":{"id":{"type":"integer","title":"Id"},"nombre":{"type":"string","title":"Nombre"},"costo_total":{"type":"string","title":"Costo Total"},"costo_etiqueta":{"type":"string","title":"Costo Etiqueta"},"costo_envase":{"type":"string","title":"Costo Envase"},"costo_caja":{"type":"string","title":"Costo Caja"},"costo_transporte":{"type":"string","title":"Costo Transporte"},"iva_percentage":{"type":"number","title":"Iva Percentage"},"iva_publico":{"type":"string","title":"Iva Publico"},"iva_mayorista":{"type":"string","title":"Iva Mayorista"},"iva_distribuidor":{"type":"string","title":"Iva Distribuidor"},"margen_publico":{"type":"number","title":"Margen Publico"},"margen_mayorista":{"type":"number","title":"Margen Mayorista"},"margen_distribuidor":{"type":"number","title":"Margen Distribuidor"},"precio_publico":{"type":"string","title":"Precio Publico"},"precio_mayorista":{"type":"string","title":"Precio Mayorista"},"precio_distribuidor":{"type":"string","title":"Precio Distribuidor"},"precio_publico_con_iva":{"type":"string","title":"Precio Publico Con Iva"},"precio_mayorista_con_iva":{"type":"string","title":"Precio Mayorista Con Iva"},"precio_distribuidor_con_iva":{"type":"string","title":"Precio Distribuidor Con Iva"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"product_materials":{"items":{"$ref":"#/components/schemas/ProductMaterialResponse"},"type":"array","title":"Product Materials","default":[]}},"type":"object","required":["id","nombre","costo_total","costo_etiqueta","costo_envase","costo_caja","costo_transporte","iva_percentage","iva_publico","iva_mayorista","iva_distribuidor","margen_publico","margen_mayorista","margen_distribuidor","precio_publico","precio_mayorista","precio_distribuidor","precio_publico_con_iva","precio_mayorista_con_iva","precio_distribuidor_con_iva","is_active","created_at","updated_at"],"title":"ProductResponse"},"ProductUpdate":{"properties":{"nombre":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nombre"},"iva_percentage":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Iva Percentage"},"margen_publico":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Margen Publico"},"margen_mayorista":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Margen Mayorista"},"margen_distribuidor":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Margen Distribuidor"},"costo_etiqueta":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Costo Etiqueta"},"costo_envase":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Costo Envase"},"costo_caja":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Costo Caja"},"costo_transporte":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"null"}],"title":"Costo Transporte"},"product_materials":{"anyOf":[{"items":{"$ref":"#/components/schemas/ProductMaterialCreate"},"type":"array"},{"type":"null"}],"title":"Product Materials"}},"type":"object","title":"ProductUpdate"},"Role":{"type":"string","enum":["user","admin"],"title":"Role"},"UnidadBase":{"type":"string","enum":["kg","litros"],"title":"UnidadBase"},"UserCreate":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","email","password"],"title":"UserCreate"},"UserLogin":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"UserLogin"},"UserOut":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","format":"email","title":"Email"},"id":{"type":"integer","title":"Id"},"role":{"$ref":"#/components/schemas/Role"}},"type":"object","required":["username","email","id","role"],"title":"UserOut"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}